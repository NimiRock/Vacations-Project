(this.webpackJsonpnimrod_website=this.webpackJsonpnimrod_website||[]).push([[0],{236:function(e,t,a){e.exports=a(353)},246:function(e,t,a){},248:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),i=a(11),l=a.n(i),s=a(20),u=a(22),m=a(21),d=a(25),f=(a(75),a(12)),p=(a(246),["btn--primary","btn--outline"]),b=["btn--medium","btn--large"];function v(e){var t=e.children,a=e.buttonStyle,n=e.buttonSize,o=e.className,c=p.includes(a)?a:p[0],i=b.includes(n)?n:b[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,{to:"btns login-button"===o?"/login":"/sign-up",duration:1e3,className:"btn-mobile"},r.a.createElement("button",{className:"btn ".concat(c," ").concat(i)},t)))}a(248);var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"GET_VACATIONS",payload:e}},g=function(e){return e?{type:"LOGIN",payload:e}:e?void 0:{type:"LOGOUT",payload:e}};function E(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.isUserLoggedIn})),a=Object(n.useState)(!1),o=Object(f.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(!0),s=Object(f.a)(l,2),m=s[0],p=s[1],b=function(){return i(!1)},h=function(){window.innerWidth<=960?p(!1):p(!0)};return Object(n.useEffect)((function(){h()}),[]),window.addEventListener("resize",h),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-container"},r.a.createElement(u.c,{to:"/",className:"navbar-logo",onClick:b},"TRVL ",r.a.createElement("i",{className:"fab fa-typo3"})),r.a.createElement("div",{className:"menu-icon",onClick:function(){return i(!c)}},r.a.createElement("i",{className:c?"fas fa-times":"fas fa-bars"})),r.a.createElement("ul",{className:c?"nav-menu active":"nav-menu"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{to:"/",className:"nav-links",onClick:b},"Home")),t.login&&"admin"===t.userRole&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{to:"/reports",className:"nav-links",onClick:b},"Reports")),t.login&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{to:"/",className:"nav-links",onClick:function(){b(),localStorage.removeItem("token"),e(g(!1))}},"Sign-Out"))),m&&r.a.createElement(v,{buttonStyle:"btn--outline"},t.login?"Welcome ".concat(t.userFName):"SIGN UP"))))}var w=a(401),O=a(406),k=a(410),j=a(402);function N(){var e=JSON.parse(localStorage.getItem("token")),t=Object(n.useState)([]),a=Object(f.a)(t,2),o=a[0],c=a[1],i=Object(m.g)();Object(n.useEffect)((function(){u()}),[]);var u=function(){var t=Object(s.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:1000/vacations/chart-data",{method:"GET",headers:{authorization:e.access_token}});case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,c(n.chart_data),n.err&&i.push("/"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"reports-chart"},r.a.createElement(w.a,{theme:O.a.material,domainPadding:15,height:150},r.a.createElement(k.a,{style:{axis:{stroke:"#756f6a"},axisLabel:{fontSize:5,padding:10},ticks:{stroke:"grey",size:5},tickLabels:{fontSize:10,padding:5}},tickValues:o&&o.map((function(e){return e.number_of_followers})),tickFormat:o&&o.map((function(e){return e.vacation_destination}))}),r.a.createElement(k.a,{style:{axis:{stroke:"#756f6a"},axisLabel:{fontSize:20,padding:30},grid:{stroke:function(e){return e.tick>.5?"red":"grey"}},ticks:{stroke:"grey",size:5},tickLabels:{fontSize:10,padding:5}},dependentAxis:!0,tickFormat:function(e){return e}}),r.a.createElement(j.a,{data:o,x:"vacation_destination",y:"number_of_followers"})))}var x=a(399),_=a(397),y=a(390),S=a(355),C=a(84),T=a.n(C),V=a(85),L=a.n(V),I=a(394),P=a(407),D=a(408),R=a(395),F=a(396),U=Object(y.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),backgroundColor:"rgba(241, 250, 238, 0.7)"}},usernameAndPassword:{width:460},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},submitLoginBtn:{width:200}}}));function A(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(f.a)(c,2),p=i[0],b=i[1],v=Object(n.useState)(""),h=Object(f.a)(v,2),E=h[0],w=h[1],O=Object(n.useState)(""),k=Object(f.a)(O,2),j=k[0],N=k[1],y=Object(n.useState)(!1),C=Object(f.a)(y,2),V=C[0],A=C[1],z=Object(n.useState)(!1),M=Object(f.a)(z,2),q=M[0],J=M[1],B=Object(n.useState)(!1),G=Object(f.a)(B,2),X=G[0],H=G[1],W=Object(m.g)(),$=Object(d.b)(),K=U(),Q=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fname:a,lname:p,username:E,password:j})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(e.sent.err){e.next=18;break}return e.next=10,Y();case 10:J(!1),o(""),b(""),w(""),N(""),W.push("/"),e.next=19;break;case 18:A(!0);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:E,password:j})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,localStorage.setItem("token",JSON.stringify({access_token:a.access_token,refresh_token:a.refresh_token})),$(g(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column sign-up"},r.a.createElement("h1",{className:"display-2 signup-header"},"Sign Up to TRVL"),V&&r.a.createElement("h3",{className:"invalid-login-entry-error"},"Username already exist"),q&&r.a.createElement("h3",{className:"invalid-login-entry-error"},"Please fill all fields"),r.a.createElement("form",{className:K.root,noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(x.a,{id:"outlined-error",label:"First Name",variant:"outlined",value:a,error:!a&&q,required:!0,onChange:function(e){return o(e.target.value)}}),r.a.createElement(x.a,{id:"outlined-error-helper-text",label:"Last Name",variant:"outlined",value:p,error:!p&&q,required:!0,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(x.a,{className:K.usernameAndPassword,id:"outlined-error",label:"Username",variant:"outlined",value:E,error:!E&&q,required:!0,onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(I.a,{className:"MuiTextField-root ".concat(K.usernameAndPassword),variant:"outlined"},r.a.createElement(D.a,{htmlFor:"outlined-adornment-password"},"Password *"),r.a.createElement(P.a,{id:"outlined-adornment-password",type:X?"text":"password",value:j,error:!j&&q,required:!0,onChange:function(e){return N(e.target.value)},endAdornment:r.a.createElement(R.a,{position:"end"},r.a.createElement(F.a,{"aria-label":"toggle password visibility",onClick:function(){return H(!X)},onMouseDown:function(e){e.preventDefault()},edge:"end"},X?r.a.createElement(T.a,null):r.a.createElement(L.a,null)))}))),r.a.createElement(S.a,{className:"p-2",color:"secondary",variant:"caption",display:"block",gutterBottom:!0},"* Required field")),r.a.createElement(_.a,{className:"".concat(K.submitLoginBtn," mb-3"),variant:"contained",color:"primary",onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=6;break}return J(!1),e.next=4,Q();case 4:e.next=7;break;case 6:J(!0);case 7:case"end":return e.stop()}}),e)})))},"Register"),r.a.createElement(u.b,{className:"login-link",to:"/login"},"Already a member? Click here to login"))}var z=Object(y.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),backgroundColor:"rgba(241, 250, 238, 0.7)"}},usernameAndPassword:{width:460},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},submitLoginBtn:{width:200}}}));function M(){var e=Object(d.b)(),t=Object(n.useState)(""),a=Object(f.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),m=Object(f.a)(i,2),p=m[0],b=m[1],v=Object(n.useState)(!1),h=Object(f.a)(v,2),E=h[0],w=h[1],O=Object(n.useState)(!1),k=Object(f.a)(O,2),j=k[0],N=k[1],y=Object(n.useState)(!1),C=Object(f.a)(y,2),V=C[0],U=C[1],A=z(),M=function(){var t=Object(s.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:1000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:p})});case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,localStorage.setItem("token",JSON.stringify({access_token:n.access_token,refresh_token:n.refresh_token})),e(g(n)),c(""),b(""),w(!1),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0),N(!0);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column log-in"},r.a.createElement("h1",{className:"display-2 login-header"},"Login to TRVL"),j&&r.a.createElement("h3",{className:"invalid-login-entry-error"},"Username or Password are incorrect"),E&&r.a.createElement("h3",{className:"invalid-login-entry-error"},"Please fill all fields"),r.a.createElement("form",{className:A.root,noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(x.a,{className:A.usernameAndPassword,id:"outlined-error",label:"Username",error:!o&&E,variant:"outlined",value:o,required:!0,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(I.a,{className:"MuiTextField-root ".concat(A.usernameAndPassword),variant:"outlined"},r.a.createElement(D.a,{htmlFor:"outlined-adornment-password"},"Password *"),r.a.createElement(P.a,{id:"outlined-adornment-password outlined-error",type:V?"text":"password",value:p,error:!p&&E,required:!0,onChange:function(e){return b(e.target.value)},endAdornment:r.a.createElement(R.a,{position:"end"},r.a.createElement(F.a,{"aria-label":"toggle password visibility",onClick:function(){return U(!V)},onMouseDown:function(e){e.preventDefault()},edge:"end"},V?r.a.createElement(T.a,null):r.a.createElement(L.a,null)))}))),r.a.createElement(S.a,{className:"p-2",color:"secondary",variant:"caption",display:"block",gutterBottom:!0},"* Required field")),r.a.createElement(_.a,{className:A.submitLoginBtn,variant:"contained",color:"primary",size:"large",onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!p){e.next=7;break}return w(!1),N(!1),e.next=5,M();case 5:e.next=8;break;case 7:w(!0);case 8:case"end":return e.stop()}}),e)})))},"Login"),r.a.createElement("div",{className:"signup-passReset-links d-flex justify-content-between w-25 mt-5"},r.a.createElement(u.b,{className:"sign-up-link",to:"/sign-up"},"Not a member yet? REGISTER HERE"),r.a.createElement(u.b,{className:"forgot-pwd-link",to:"/forgot-pwd"},"Forgot Password?")))}var q=a(220),J=a.n(q),B=a(222),G=a.n(B),X=a(221),H=a.n(X),W=Object(y.a)((function(e){return{button:{margin:e.spacing(1)},followButton:{width:"2rem",height:"2rem",cursor:"pointer"}}}));function $(e){var t=e.vacation,a=e.iconColor,n=e.followFunction,o=e.handleOpen,c=e.setVacationID,i=e.setModalModeNewOrUpdate,u=e.setVacationDestination,m=e.setVacationDescription,f=e.setVacationArrivalDate,p=e.setVacationLeaveDate,b=e.setVacationPrice,v=e.setVacationImgURL,g=W(),E=Object(d.b)(),w=Object(d.c)((function(e){return e.isUserLoggedIn})),O=JSON.parse(localStorage.getItem("token")),k=function(){var e=Object(s.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/vacations/".concat(t.vacation_id),{method:"DELETE",headers:{authorization:O.refresh_token}});case 3:return e.next=5,fetch("http://localhost:1000/vacations",{headers:{authorization:O.access_token}});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,E(h(n.vacations)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"cards__item"},r.a.createElement("div",{className:"cards__item__link"},r.a.createElement("figure",{className:"cards__item__pic-wrap"},r.a.createElement("img",{src:t.vacation_img_url,alt:"Travel Images",className:"cards__item__img"})),r.a.createElement("div",{className:"follow-button-and-information d-flex justify-content-between"},r.a.createElement("div",{className:"cards__item__info"},r.a.createElement("h3",{className:"cards__item__text"},t.vacation_destination),r.a.createElement("h5",null,"Arrival: ",t.vacation_arrival_date),r.a.createElement("h5",null,"Leave: ",t.vacation_leave_date),r.a.createElement("h5",null,t.vacation_description)),"user"===w.userRole&&r.a.createElement("div",{className:"like-button"},r.a.createElement(J.a,{className:g.followButton,color:a,onClick:function(){return n(t.vacation_id)}}))),r.a.createElement("div",{className:"vacation-price d-flex justify-content-center"},r.a.createElement("h2",null,"$",t.vacation_price)),r.a.createElement("div",{className:"admin-edit-and-delete"},"admin"===w.userRole&&r.a.createElement(_.a,{variant:"contained",color:"primary",className:"".concat(g.button," admin-edit-button"),startIcon:r.a.createElement(H.a,null),onClick:function(){u(t.vacation_destination),m(t.vacation_description),f(t.vacation_arrival_date),p(t.vacation_leave_date),b(t.vacation_price),v(t.vacation_img_url),o(),c(t.vacation_id),i("update")}},"Edit"),"admin"===w.userRole&&r.a.createElement(_.a,{variant:"contained",color:"secondary",className:g.button,startIcon:r.a.createElement(G.a,null),onClick:k},"Delete")))))}a(350);var K=a(404),Q=a(398),Y=a(356),Z=a(223),ee=a.n(Z),te=a(224),ae=a.n(te),ne=Object(y.a)((function(e){return{button:{margin:e.spacing(1)},root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function re(){var e=ne(),t=Object(n.useState)(!1),a=Object(f.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),u=Object(f.a)(i,2),m=u[0],p=u[1],b=Object(n.useState)(!1),v=Object(f.a)(b,2),g=v[0],E=v[1],w=Object(n.useState)(""),O=Object(f.a)(w,2),k=O[0],j=O[1],N=Object(n.useState)([]),y=Object(f.a)(N,2),S=y[0],C=y[1],T=Object(n.useState)([]),V=Object(f.a)(T,2),L=V[0],I=V[1],P=Object(n.useState)(""),D=Object(f.a)(P,2),R=D[0],F=D[1],U=Object(n.useState)(""),A=Object(f.a)(U,2),z=A[0],M=A[1],q=Object(n.useState)(""),J=Object(f.a)(q,2),B=J[0],G=J[1],X=Object(n.useState)(""),H=Object(f.a)(X,2),W=H[0],Z=H[1],te=Object(n.useState)(""),re=Object(f.a)(te,2),oe=re[0],ce=re[1],ie=Object(n.useState)(""),le=Object(f.a)(ie,2),se=le[0],ue=le[1],me=Object(d.b)(),de=Object(d.c)((function(e){return e.getAllVacations})),fe=Object(d.c)((function(e){return e.isUserLoggedIn})),pe=JSON.parse(localStorage.getItem("token"));Object(n.useEffect)((function(){ge(),Ee()}),[de]);var be=function(){c(!0)},ve=function(){c(!1)},he=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pe){e.next=9;break}return e.next=3,fetch("http://localhost:1000/vacations",{headers:{authorization:pe.access_token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,me(h(a.vacations)),a.err&&console.log(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/following",{method:"GET",headers:{authorization:pe.access_token}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,C(a.followed_Vacations);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/not-following",{method:"GET",headers:{authorization:pe.access_token}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,I(a.vacations_not_following.filter((function(e){return e.following_user_id!==fe.userid})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/follow",{method:"POST",headers:{"Content-Type":"application/json",authorization:pe.access_token},body:JSON.stringify({vacation_id:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:(n=e.sent).err||(C(n.newFollowedVacations),I(n.newUnFollowedVacations.filter((function(e){return e.following_user_id!==fe.userid}))));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/stop-follow",{method:"POST",headers:{"Content-Type":"application/json",authorization:pe.access_token},body:JSON.stringify({vacation_id:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:(n=e.sent).err||(C(n.newFollowedVacations),I(n.newUnFollowedVacations.filter((function(e){return e.following_user_id!==fe.userid}))));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/",{method:"POST",headers:{"Content-Type":"application/json",authorization:pe.refresh_token},body:JSON.stringify({destination:R,description:z,arrival_date:B,leave_date:W,price:oe,img_url:se})});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/vacations/".concat(k),{method:"PUT",headers:{"Content-Type":"application/json",authorization:pe.refresh_token},body:JSON.stringify({destination:R,description:z,arrival_date:B,leave_date:W,price:oe,img_url:se})});case 3:return e.next=5,fetch("http://localhost:1000/vacations",{headers:{authorization:pe.access_token}});case 5:return t=e.sent,e.next=8,t.json();case 8:a=e.sent,me(h(a.vacations)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"cards",id:"cards"},r.a.createElement("div",{className:"admin-user-header"},"admin"===fe.userRole?r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:function(){E(!1),p("new"),be(),F(""),M(""),G(""),Z(""),ce(""),ue("")}},"Add new Vacation"):r.a.createElement("h1",null,"Followed Vacations!")),r.a.createElement("div",{className:"cards__container"},r.a.createElement("div",{className:"cards__wrapper"},r.a.createElement("ul",{className:"cards__items"},S.map((function(e){return r.a.createElement($,{key:e.vacation_id,vacation:e,iconColor:"secondary",followFunction:Oe,editVacation:je,handleOpen:be,setVacationID:j,setModalModeNewOrUpdate:p,setVacationDestination:F,setVacationDescription:M,setVacationArrivalDate:G,setVacationLeaveDate:Z,setVacationPrice:ce,setVacationImgURL:ue})}))),r.a.createElement("hr",null),"user"===fe.userRole&&r.a.createElement("h1",{className:"d-flex justify-content-center"},"Don't Miss These Vacations!"),r.a.createElement("ul",{className:"cards__items"},L.map((function(e){return r.a.createElement($,{key:e.vacation_id,vacation:e,iconColor:"inherit",followFunction:we,editVacation:je,handleOpen:be,setVacationID:j,setModalModeNewOrUpdate:p,setVacationDestination:F,setVacationDescription:M,setVacationArrivalDate:G,setVacationLeaveDate:Z,setVacationPrice:ce,setVacationImgURL:ue})}))),r.a.createElement(K.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:o,onClose:ve,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500}},r.a.createElement(Y.a,{in:o},r.a.createElement("div",{className:e.paper},r.a.createElement("h2",{id:"transition-modal-title",className:"d-flex justify-content-center"},"new"===m?"New Vacation Details":"Edit Vacation"),r.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},r.a.createElement(x.a,{id:"outlined-multiline-flexible",label:"Destination",multiline:!0,rowsMax:4,variant:"outlined",value:R,required:!0,error:!R&&g,helperText:!R&&g&&"Please Insert Destination",onChange:function(e){return F(e.target.value)}}),r.a.createElement(x.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:4,variant:"outlined",value:z,required:!0,error:!z&&g,helperText:!z&&g&&"Please Insert Description",onChange:function(e){return M(e.target.value)}}),r.a.createElement(x.a,{id:"outlined-multiline-flexible",label:"Arrival Date",multiline:!0,rowsMax:4,variant:"outlined",value:B,required:!0,error:!B&&g,helperText:!B&&g&&"Please Insert Arrival Date",onChange:function(e){return G(e.target.value)}}),r.a.createElement(x.a,{id:"outlined-multiline-flexible",label:"Leave Date",multiline:!0,rowsMax:4,variant:"outlined",value:W,required:!0,error:!W&&g,helperText:!W&&g&&"Please Insert Leave Date",onChange:function(e){return Z(e.target.value)}}),r.a.createElement(x.a,{id:"outlined-multiline-flexible",label:"Price",multiline:!0,rowsMax:4,variant:"outlined",value:oe,required:!0,error:!oe&&g,helperText:!oe&&g&&"Please Insert Price",onChange:function(e){return ce(e.target.value)}}),r.a.createElement(x.a,{id:"outlined-multiline-flexible",label:"Img URL",multiline:!0,rowsMax:4,variant:"outlined",value:se,required:!0,error:!se&&g,helperText:!se&&g&&"Please Insert Image URL",onChange:function(e){return ue(e.target.value)}})),r.a.createElement(_.a,{variant:"contained",color:"primary",className:e.button,startIcon:"new"===m?r.a.createElement(ee.a,null):r.a.createElement(ae.a,null),onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==m){e.next=5;break}return e.next=3,ke();case 3:e.next=7;break;case 5:return e.next=7,je();case 7:R&&z&&B&&W&&oe&&se?(ve(),he(),F(""),M(""),G(""),Z(""),ce(""),ue("")):E(!0);case 8:case"end":return e.stop()}}),e)})))},"new"===m?"Add Vacation":"Update Vacation")))))))}a(351);function oe(){return r.a.createElement("div",{className:"footer-container"},r.a.createElement("section",{className:"social-media"},r.a.createElement("div",{className:"social-media-wrap"},r.a.createElement("div",{className:"footer-logo"},r.a.createElement(u.c,{className:"social-logo",to:"/"},"TRVL ",r.a.createElement("i",{className:"fab fa-typo3"}))),r.a.createElement("small",{className:"website-rights"},"Nimrod Rokach \xa9 2020"),r.a.createElement("div",{className:"social-icons"},r.a.createElement("a",{className:"social-icon-link facebook",href:"https://www.facebook.com/nimrod.rokach/",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook"},r.a.createElement("i",{className:"fab fa-facebook-f"})),r.a.createElement("a",{className:"social-icon-link linkedin",href:"https://www.linkedin.com/in/nimrod-rokach/",target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn"},r.a.createElement("i",{className:"fab fa-linkedin"}))))))}a(352);function ce(){return r.a.createElement("div",{className:"hero-container"},r.a.createElement("h1",null,"LOGIN FOR THE BEST DEALS!"),r.a.createElement("p",null,"What are you waiting for?"),r.a.createElement("div",{className:"hero-btns"},r.a.createElement(v,{className:"btns login-button",buttonStyle:"btn--outline",buttonSize:"btn--large"},"LOG IN"),r.a.createElement(v,{className:"btns signup-button",buttonStyle:"btn--primary",buttonSize:"btn--large"},"SIGN UP")))}var ie=Object(y.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),backgroundColor:"rgba(241, 250, 238, 0.7)"}},usernameAndPassword:{width:460},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},backBtn:{backgroundColor:"salmon",color:"whitesmoke","&:hover":{backgroundColor:"rgb(250, 160, 150)"}}}}));function le(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(f.a)(c,2),m=i[0],d=i[1],p=Object(n.useState)(""),b=Object(f.a)(p,2),v=b[0],h=b[1],g=Object(n.useState)(!1),E=Object(f.a)(g,2),w=E[0],O=E[1],k=Object(n.useState)(!1),j=Object(f.a)(k,2),N=j[0],y=j[1],C=Object(n.useState)(!1),V=Object(f.a)(C,2),U=V[0],A=V[1],z=Object(n.useState)(!1),M=Object(f.a)(z,2),q=M[0],J=M[1],B=ie(),G=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/auth/reset-pwd",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lname:a,username:m,password:v})});case 3:return t=e.sent,e.next=6,t.json();case 6:e.sent.err?y(!0):(o(""),d(""),h(""),A(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column forgot-password"},r.a.createElement("h1",{className:"display-2 reset-header"},"Reset Password"),U&&r.a.createElement("h3",{className:"text-success"},"Password changed successfully, you can now log in"),N&&r.a.createElement("h3",{className:"invalid-login-entry-error"},"Username or last name are incorrect"),w&&r.a.createElement("h3",{className:"invalid-login-entry-error"},"Please fill all fields"),r.a.createElement("form",{className:B.root,noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(x.a,{id:"outlined-error-helper-text",label:"Last Name",variant:"outlined",value:a,error:!a&&w,required:!0,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(x.a,{className:B.usernameAndPassword,id:"outlined-error",label:"Username",variant:"outlined",value:m,error:!m&&w,required:!0,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(I.a,{className:"MuiTextField-root ".concat(B.usernameAndPassword),variant:"outlined"},r.a.createElement(D.a,{htmlFor:"outlined-adornment-password"},"New Password *"),r.a.createElement(P.a,{id:"outlined-adornment-password",type:q?"text":"password",value:v,error:!v&&w,required:!0,onChange:function(e){return h(e.target.value)},endAdornment:r.a.createElement(R.a,{position:"end"},r.a.createElement(F.a,{"aria-label":"toggle password visibility",onClick:function(){return J(!q)},onMouseDown:function(e){e.preventDefault()},edge:"end"},q?r.a.createElement(T.a,null):r.a.createElement(L.a,null)))}))),r.a.createElement(S.a,{className:"p-2",color:"secondary",variant:"caption",display:"block",gutterBottom:!0},"* Required field")),r.a.createElement("div",{className:"login-and-reset-btns d-flex justify-content-around w-25"},r.a.createElement(_.a,{className:B.backBtn,variant:"contained",to:"/login",component:u.b},"Back to login"),r.a.createElement(_.a,{variant:"contained",color:"primary",onClick:Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=6;break}return e.next=3,G();case 3:O(!1),e.next=7;break;case 6:O(!0);case 7:case"end":return e.stop()}}),e)})))},"Reset Password")))}function se(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.isUserLoggedIn})),a=JSON.parse(localStorage.getItem("token"));Object(n.useEffect)((function(){a&&o()}),[]);var o=function(){var t=Object(s.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:1000/auth/refresh",{method:"GET",headers:{authorization:a.refresh_token}});case 2:return n=t.sent,t.next=5,n.json();case 5:(r=t.sent).err?localStorage.removeItem("token"):(localStorage.setItem("token",JSON.stringify({access_token:r.access_token,refresh_token:r.refresh_token})),e(g(r)));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(E,null),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,component:t.login?re:ce}),r.a.createElement(m.b,{path:"/reports",component:N}),r.a.createElement(m.b,{path:"/sign-up",render:function(){return t.login?r.a.createElement(m.a,{to:"/"}):r.a.createElement(A,null)}}),r.a.createElement(m.b,{path:"/login",render:function(){return t.login?r.a.createElement(m.a,{to:"/"}):r.a.createElement(M,null)}}),r.a.createElement(m.b,{path:"/forgot-pwd",render:function(){return t.login?r.a.createElement(m.a,{to:"/"}):r.a.createElement(le,null)}}),r.a.createElement(m.b,{render:function(){return r.a.createElement(m.a,{to:{pathname:"/"}})}})),r.a.createElement(oe,null)))}var ue=a(79),me={login:!1,userid:null,userFName:null,userRole:null},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var a={login:!0,userid:t.payload.user.user_id,userFName:t.payload.user.user_fname,userRole:t.payload.user.user_role};return a;case"LOGOUT":return me;default:return e}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VACATIONS":return t.payload;default:return e}},pe=Object(ue.b)({isUserLoggedIn:de,getAllVacations:fe}),be=Object(ue.c)(pe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:be},r.a.createElement(se,null))),document.getElementById("root"))},75:function(e,t,a){}},[[236,1,2]]]);
//# sourceMappingURL=main.4f3e3d87.chunk.js.map